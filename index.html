<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DEGEN_AI // COMMAND_CENTER</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --neon-green: #00ff41;
            --neon-dark: #003b00;
            --bg-color: #050505;
            --panel-bg: rgba(0, 10, 0, 0.85);
            --border: 1px solid rgba(0, 255, 65, 0.3);
            --font: 'Courier New', monospace;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg-color); color: var(--neon-green); font-family: var(--font); overflow: hidden; height: 100vh; width: 100vw; }
        
        /* 3D LAYER */
        #canvas-container { position: fixed; top: 0; left: 0; z-index: -1; width: 100%; height: 100%; }
        .scanlines { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.25) 50%), linear-gradient(90deg, rgba(255,0,0,0.06), rgba(0,255,0,0.02), rgba(0,0,255,0.06)); background-size: 100% 3px, 3px 100%; pointer-events: none; z-index: 99; opacity: 0.4; }

        /* GRID LAYOUT (FIXED HEIGHT) */
        .grid-layout {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            grid-template-rows: 60px 1fr 40px;
            height: 100vh;
            padding: 15px;
            gap: 15px;
        }

        /* NAVIGATION */
        header { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon-green); background: #000; padding: 0 20px; z-index: 100; }
        .nav-links a { color: #555; text-decoration: none; margin-left: 30px; font-weight: bold; font-size: 1.2rem; transition: 0.3s; text-transform: uppercase; }
        .nav-links a:hover, .nav-links a.active { color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green); }

        /* PANELS */
        .panel { 
            background: var(--panel-bg); 
            border: var(--border); 
            position: relative; 
            display: flex; 
            flex-direction: column; 
            backdrop-filter: blur(5px); 
            box-shadow: 0 0 20px rgba(0,255,65,0.05);
            overflow: hidden; 
            min-height: 0;
        }
        
        .panel-header { 
            background: rgba(0,255,65,0.1); 
            padding: 5px 10px; 
            font-size: 0.8rem; 
            font-weight: bold; 
            border-bottom: var(--border); 
            display: flex; 
            justify-content: space-between;
            flex-shrink: 0;
        }
        
        /* HERO SECTION */
        .hero { grid-column: 2 / 3; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; z-index: 10; }
        h1 { font-size: 5rem; line-height: 0.9; text-shadow: 0 0 20px var(--neon-green); margin-bottom: 20px; letter-spacing: -2px; }
        .btn { background: var(--neon-green); color: #000; padding: 15px 40px; border: none; font-size: 1.2rem; font-weight: bold; cursor: pointer; text-transform: uppercase; clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px); transition: 0.3s; }
        .btn:hover { background: #fff; box-shadow: 0 0 30px #fff; transform: scale(1.05); }

        /* TICKER */
        #ticker-feed { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 10px; 
            font-size: 0.85rem; 
            height: 100%;
        }
        
        .ticker-item { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid rgba(0,255,65,0.1); }
        
        /* FOOTER */
        footer { grid-column: 1 / -1; border-top: var(--border); display: flex; justify-content: space-between; align-items: center; background: #000; padding: 0 20px; font-size: 0.8rem; color: #666; z-index: 100; }

        /* HUD CORNERS */
        .hud-tl { position: absolute; top: -1px; left: -1px; width: 20px; height: 20px; border-top: 3px solid var(--neon-green); border-left: 3px solid var(--neon-green); }
        .hud-br { position: absolute; bottom: -1px; right: -1px; width: 20px; height: 20px; border-bottom: 3px solid var(--neon-green); border-right: 3px solid var(--neon-green); }

        /* ANIMATIONS */
        @keyframes pulseGreen { 0% { opacity: 1; text-shadow: 0 0 10px #0f0; } 50% { opacity: 0.5; text-shadow: 0 0 20px #0f0; } 100% { opacity: 1; text-shadow: 0 0 10px #0f0; } }

        /* SCROLLBAR STYLE */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--neon-green); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #fff; }

    </style>
</head>
<body>

    <div id="canvas-container"></div>
    <div class="scanlines"></div>

    <div class="grid-layout">
        <header>
            <div style="font-size:1.5rem; font-weight:900; letter-spacing:2px;">DEGEN_AI</div>
            <div class="nav-links">
                <a href="index.html" class="active">COMMAND</a>
                <a href="terminal.html">TERMINAL</a>
                <a href="data.html">DATA</a>
            </div>
            <div id="clock">00:00:00</div>
        </header>

        <div class="panel">
            <div class="hud-tl"></div><div class="hud-br"></div>
            <div class="panel-header"><span>MARKET_STATUS</span><span>PUMPING</span></div>
            <div style="padding: 20px; font-size: 0.9rem; line-height: 1.8;">
                <div>> CORE: <span style="color:#fff">ONLINE</span></div>
                <div>> UPLINK: <span style="color:#fff">SECURE</span></div>
                <div>> HOLDERS: <span style="color:var(--neon-green)">8,492 (GROWING)</span></div>
                <hr style="border-color:rgba(0,255,65,0.2); margin:15px 0;">
                <div style="color:#aaa">CURRENT SENTIMENT:</div>
                <div style="font-size:1.8rem; font-weight:bold; color:var(--neon-green); animation: pulseGreen 1s infinite;">HYPER BULLISH</div>
                <br>
                <div style="font-size:0.8rem; color:#fff;">
                    NOTICE: INSTITUTIONAL BUY PRESSURE DETECTED.<br>
                    GOD_CANDLE LOADING...
                </div>
            </div>
        </div>

        <div class="hero">
            <h1>HUMAN<br>OBSOLETE</h1>
            <p style="color:#aaa; max-width:500px; margin-bottom:30px; font-size:1.1rem;">
                The protocol is autonomous. The trades are algorithmic. 
                The outcome is inevitable.
            </p>
            <button class="btn" onclick="window.location.href='terminal.html'">INITIALIZE AGENT</button>
        </div>

        <div class="panel">
            <div class="hud-tl"></div><div class="hud-br"></div>
            <div class="panel-header"><span>SOLANA_MEMPOOL</span><span>LIVE</span></div>
            <div id="ticker-feed">
                </div>
        </div>

        <footer>
            <div>SERVER: TOKYO_04</div>
            <div>GAS: <span style="color:var(--neon-green)">12 GWEI</span></div>
            <div>VERSION: 4.0.1</div>
        </footer>
    </div>

    <script>
        /* --- 3D SCENE & MOUSE INTERACTION --- */
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const geometry = new THREE.TorusKnotGeometry(10, 3, 150, 20);
        const material = new THREE.PointsMaterial({ color: 0x00ff41, size: 0.12, transparent: true, opacity: 0.8 });
        const torus = new THREE.Points(geometry, material);
        scene.add(torus);

        const grid = new THREE.GridHelper(200, 50, 0x004400, 0x001100);
        grid.position.y = -20;
        scene.add(grid);

        camera.position.z = 35;

        // MOUSE TRACKING
        let mouseX = 0;
        let mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - window.innerWidth / 2) / 100;
            mouseY = (event.clientY - window.innerHeight / 2) / 100;
        });

        function animate() {
            requestAnimationFrame(animate);
            
            // Auto-rotate
            torus.rotation.x += 0.002;
            torus.rotation.y += 0.005;
            grid.rotation.y += 0.001;

            // Interactive Camera (Follows Mouse)
            camera.position.x += (mouseX - camera.position.x) * 0.05;
            camera.position.y += (-mouseY - camera.position.y) * 0.05;
            camera.lookAt(scene.position);

            renderer.render(scene, camera);
        }
        animate();

        /* --- CACHED TICKER FEED SYSTEM --- */
        const ticker = document.getElementById('ticker-feed');
        const CA = "Dt7rNPRfpmf4P8QvWQgyh5S7pnp4nQWYUmUwrarwpump"; 
        
        // 1. LOAD SAVED TRADES
        let tradeHistory = JSON.parse(localStorage.getItem('degen_trades') || '[]');
        let knownSig = new Set();

        // 2. RENDER HISTORY
        tradeHistory.reverse().forEach(t => {
            knownSig.add(t.tx);
            addTickerItemToDOM(t.kind, t.vol);
        });

        // Add item to DOM
        function addTickerItemToDOM(kind, vol) {
            const div = document.createElement('div');
            div.className = 'ticker-item';
            div.innerHTML = `
                <span style="color:${kind==='buy'?'#0f0':'#f00'}">${kind.toUpperCase()}</span>
                <span>$${vol}</span>
            `;
            ticker.prepend(div);
            // Limit to 100 items to prevent lag
            if(ticker.children.length > 100) ticker.lastChild.remove();
        }

        async function startFeed() {
            try {
                const res = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${CA}`);
                const data = await res.json();
                if(data.pairs) {
                    const pool = data.pairs[0].pairAddress;
                    setInterval(() => fetchTrades(pool), 3000);
                }
            } catch(e) {}
        }

        async function fetchTrades(pool) {
            try {
                const res = await fetch(`https://api.geckoterminal.com/api/v2/networks/solana/pools/${pool}/trades`);
                const json = await res.json();
                
                // Process trades
                json.data.reverse().forEach(t => {
                    const attr = t.attributes;
                    if(!knownSig.has(attr.tx_hash)) {
                        knownSig.add(attr.tx_hash);
                        if(knownSig.size > 200) knownSig.clear();

                        const tradeData = {
                            tx: attr.tx_hash,
                            kind: attr.kind,
                            vol: parseFloat(attr.volume_in_usd).toFixed(2)
                        };

                        // Save to Cache
                        tradeHistory.push(tradeData);
                        if(tradeHistory.length > 100) tradeHistory.shift();
                        localStorage.setItem('degen_trades', JSON.stringify(tradeHistory));

                        // Render
                        addTickerItemToDOM(tradeData.kind, tradeData.vol);
                    }
                });
            } catch(e) {}
        }
        startFeed();

        // Clock
        setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
        
        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>